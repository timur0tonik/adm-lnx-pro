# adm-lnx-pro

### Обновление ядра системы
Научиться обновлять ядро в ОС Linux

Терминал, команды и результат:
```
admin-tk@ubnt-learn-int04:~$ uname -r                                                                                                                                         6.8.0-60-generic                                                                                                                                                              admin-tk@ubnt-learn-int04:~$ uname -a                                                                                                                                         Linux ubnt-learn-int04 6.8.0-60-generic #63-Ubuntu SMP PREEMPT_DYNAMIC Tue Apr 15 19:04:15 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux                                            admin-tk@ubnt-learn-int04:~$ lsb_release -a                                                                                                                                   No LSB modules are available.                                                                                                                                                 Distributor ID: Ubuntu                                                                                                                                                        Description:    Ubuntu 24.04.2 LTS                                                                                                                                            Release:        24.04                                                                                                                                                         Codename:       noble                                                                                                                                                         admin-tk@ubnt-learn-int04:~$ mkdir kernel && cd kernel                                                                                                                        admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.13.2/amd64/linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb            --2025-09-05 12:09:04--  https://kernel.ubuntu.com/mainline/v6.13.2/amd64/linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                            Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.75, 185.125.189.76, 185.125.189.74                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.75|:443... connected.                                                                                         HTTP request sent, awaiting response... 404 Not Found                                                                                                                         2025-09-05 12:09:04 ERROR 404: Not Found.                                                                                                                                                                                                                                                                                                                   admin-tk@ubnt-learn-int04:~/kernel$ ls                                                                                                                                        admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb            --2025-09-05 12:13:41--  https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                            Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.76, 185.125.189.74, 185.125.189.75                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.76|:443... connected.                                                                                         HTTP request sent, awaiting response... 200 OK                                                                                                                                Length: 3671618 (3.5M) [application/x-debian-package]                                                                                                                         Saving to: ‘linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’                                                                                                                                                                                                                                                                       linux-headers-6.16.5-061605-generic_6.16.5- 100%[=========================================================================================>]   3.50M  7.69MB/s    in 0.5s                                                                                                                                                                                   2025-09-05 12:13:41 (7.69 MB/s) - ‘linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’ saved [3671618/3671618]                                                                                                                                                                                                                        admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb                      --2025-09-05 12:13:58--  https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb                                      Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.76, 185.125.189.75, 185.125.189.74                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.76|:443... connected.                                                                                         HTTP request sent, awaiting response... 200 OK                                                                                                                                Length: 14252736 (14M) [application/x-debian-package]                                                                                                                         Saving to: ‘linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb’                                                                                                                                                                                                                                                                                 linux-headers-6.16.5-061605_6.16.5-061605.2 100%[=========================================================================================>]  13.59M  16.0MB/s    in 0.9s                                                                                                                                                                                   2025-09-05 12:14:00 (16.0 MB/s) - ‘linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb’ saved [14252736/14252736]                                                                                                                                                                                                                                admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb     --2025-09-05 12:14:10--  https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                     Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.76, 185.125.189.74, 185.125.189.75                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.76|:443... connected.                                                                                         HTTP request sent, awaiting response... 200 OK                                                                                                                                Length: 16066752 (15M) [application/x-debian-package]                                                                                                                         Saving to: ‘linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’                                                                                                                                                                                                                                                                linux-image-unsigned-6.16.5-061605-generic_ 100%[=========================================================================================>]  15.32M  18.2MB/s    in 0.8s                                                                                                                                                                                   2025-09-05 12:14:12 (18.2 MB/s) - ‘linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’ saved [16066752/16066752]                                                                                                                                                                                                               admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb            --2025-09-05 12:14:37--  https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                            Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.74, 185.125.189.76, 185.125.189.75                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.74|:443... connected.                                                                                         HTTP request sent, awaiting response... 200 OK                                                                                                                                Length: 262144192 (250M) [application/x-debian-package]                                                                                                                       Saving to: ‘linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’                                                                                                                                                                                                                                                                       linux-modules-6.16.5-061605-generic_6.16.5- 100%[=========================================================================================>] 250.00M  29.1MB/s    in 9.1s                                                                                                                                                                                   2025-09-05 12:14:47 (27.4 MB/s) - ‘linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’ saved [262144192/262144192]                                                                                                                                                                                                                    admin-tk@ubnt-learn-int04:~/kernel$                                                                                                    




admin-tk@ubnt-learn-int04:~/kernel$ script -a session.log                                                                                                                     Script started, output log file is 'session.log'.                                                                                                                             To run a command as administrator (user "root"), use "sudo <command>".                                                                                                        See "man sudo_root" for details.                                                                                                                                                                                                                                                                                                                            admin-tk@ubnt-learn-int04:~/kernel$ sudo script -a session.log                                                                                                                [sudo] password for admin-tk:                                                                                                                                                 Script started, output log file is 'session.log'.                                                                                                                             root@ubnt-learn-int04:/home/admin-tk/kernel# ls                                                                                                                               linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb            linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb  session.log        linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb  linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                            root@ubnt-learn-int04:/home/admin-tk/kernel# sudo dpkg -i *.deb                                                                                                               Selecting previously unselected package linux-headers-6.16.5-061605.                                                                                                          (Reading database ... 126025 files and directories currently installed.)                                                                                                      Preparing to unpack linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb ...                                                                                        Unpacking linux-headers-6.16.5-061605 (6.16.5-061605.202509041605) ...                                                                                                        Selecting previously unselected package linux-headers-6.16.5-061605-generic.                                                                                                  Preparing to unpack linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb ...                                                                              Unpacking linux-headers-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                                Selecting previously unselected package linux-image-unsigned-6.16.5-061605-generic.                                                                                           Preparing to unpack linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb ...                                                                       Unpacking linux-image-unsigned-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                         Selecting previously unselected package linux-modules-6.16.5-061605-generic.                                                                                                  Preparing to unpack linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb ...                                                                              Unpacking linux-modules-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                                Setting up linux-headers-6.16.5-061605 (6.16.5-061605.202509041605) ...                                                                                                       Setting up linux-headers-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                               Setting up linux-modules-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                               Setting up linux-image-unsigned-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                        I: /boot/vmlinuz.old is now a symlink to vmlinuz-6.8.0-79-generic                                                                                                             I: /boot/initrd.img.old is now a symlink to initrd.img-6.8.0-79-generic                                                                                                       I: /boot/vmlinuz is now a symlink to vmlinuz-6.16.5-061605-generic                                                                                                            I: /boot/initrd.img is now a symlink to initrd.img-6.16.5-061605-generic                                                                                                      Processing triggers for linux-image-unsigned-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                           /etc/kernel/postinst.d/initramfs-tools:                                                                                                                                       update-initramfs: Generating /boot/initrd.img-6.16.5-061605-generic                                                                                                           /etc/kernel/postinst.d/zz-update-grub:                                                                                                                                        Sourcing file `/etc/default/grub'                                                                                                                                             Generating grub configuration file ...                                                                                                                                        Found linux image: /boot/vmlinuz-6.16.5-061605-generic                                                                                                                        Found initrd image: /boot/initrd.img-6.16.5-061605-generic                                                                                                                    Found linux image: /boot/vmlinuz-6.8.0-79-generic                                                                                                                             Found initrd image: /boot/initrd.img-6.8.0-79-generic                                                                                                                         Found linux image: /boot/vmlinuz-6.8.0-60-generic                                                                                                                             Found initrd image: /boot/initrd.img-6.8.0-60-generic                                                                                                                         Warning: os-prober will not be executed to detect other bootable partitions.                                                                                                  Systems on them will not be added to the GRUB boot configuration.                                                                                                             Check GRUB_DISABLE_OS_PROBER documentation entry.                                                                                                                             Adding boot menu entry for UEFI Firmware Settings ...                                                                                                                         done                                                                                                                                                                          root@ubnt-learn-int04:/home/admin-tk/kernel# ls -al /boot                                                                                                                     total 305996                                                                                                                                                                  drwxr-xr-x  4 root root     4096 Sep  5 12:35 .                                                                                                                               drwxr-xr-x 23 root root     4096 May 28 09:45 ..                                                                                                                              -rw-r--r--  1 root root   299505 Sep  4 16:05 config-6.16.5-061605-generic                                                                                                    -rw-r--r--  1 root root   287574 Apr 15 17:24 config-6.8.0-60-generic                                                                                                         -rw-r--r--  1 root root   287600 Aug 12 10:33 config-6.8.0-79-generic                                                                                                         drwxr-xr-x  5 root root     4096 Sep  5 12:35 grub                                                                                                                            lrwxrwxrwx  1 root root       32 Sep  5 12:34 initrd.img -> initrd.img-6.16.5-061605-generic                                                                                  -rw-r--r--  1 root root 93157117 Sep  5 12:35 initrd.img-6.16.5-061605-generic                                                                                                -rw-r--r--  1 root root 72388638 Jul  1 06:18 initrd.img-6.8.0-60-generic                                                                                                     -rw-r--r--  1 root root 72465512 Aug 29 06:49 initrd.img-6.8.0-79-generic                                                                                                     lrwxrwxrwx  1 root root       27 Sep  5 12:34 initrd.img.old -> initrd.img-6.8.0-79-generic                                                                                   drwx------  2 root root    16384 May 28 09:41 lost+found                                                                                                                      -rw-------  1 root root 10126845 Sep  4 16:05 System.map-6.16.5-061605-generic                                                                                                -rw-------  1 root root  9109334 Apr 15 17:24 System.map-6.8.0-60-generic                                                                                                     -rw-------  1 root root  9113656 Aug 12 10:33 System.map-6.8.0-79-generic                                                                                                     lrwxrwxrwx  1 root root       29 Sep  5 12:34 vmlinuz -> vmlinuz-6.16.5-061605-generic                                                                                        -rw-------  1 root root 16032256 Sep  4 16:05 vmlinuz-6.16.5-061605-generic                                                                                                   -rw-------  1 root root 14997896 Apr 15 17:30 vmlinuz-6.8.0-60-generic                                                                                                        -rw-------  1 root root 15014280 Aug 12 10:35 vmlinuz-6.8.0-79-generic                                                                                                        lrwxrwxrwx  1 root root       24 Sep  5 12:34 vmlinuz.old -> vmlinuz-6.8.0-79-generic                                                                                         root@ubnt-learn-int04:/home/admin-tk/kernel# 

root@ubnt-learn-int04:/home/admin-tk/kernel# sudo update-grub                                                                                                                 Sourcing file `/etc/default/grub'                                                                                                                                             Generating grub configuration file ...                                                                                                                                        Found linux image: /boot/vmlinuz-6.16.5-061605-generic                                                                                                                        Found initrd image: /boot/initrd.img-6.16.5-061605-generic                                                                                                                    Found linux image: /boot/vmlinuz-6.8.0-79-generic                                                                                                                             Found initrd image: /boot/initrd.img-6.8.0-79-generic                                                                                                                         Found linux image: /boot/vmlinuz-6.8.0-60-generic                                                                                                                             Found initrd image: /boot/initrd.img-6.8.0-60-generic                                                                                                                         Warning: os-prober will not be executed to detect other bootable partitions.                                                                                                  Systems on them will not be added to the GRUB boot configuration.                                                                                                             Check GRUB_DISABLE_OS_PROBER documentation entry.                                                                                                                             Adding boot menu entry for UEFI Firmware Settings ...                                                                                                                         done 

root@ubnt-learn-int04:/home/admin-tk/kernel# sudo grub-set-default 0
admin-tk@ubnt-learn-int04:~$ uname -r
6.16.5-061605-generic
admin-tk@ubnt-learn-int04:~$

```

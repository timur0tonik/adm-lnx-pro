# adm-lnx-pro

### Обновление ядра системы
Научиться обновлять ядро в ОС Linux

Терминал, команды и результат:
```
admin-tk@ubnt-learn-int04:~$ uname -r                                                                                                                                         6.8.0-60-generic                                                                                                                                                              admin-tk@ubnt-learn-int04:~$ uname -a                                                                                                                                         Linux ubnt-learn-int04 6.8.0-60-generic #63-Ubuntu SMP PREEMPT_DYNAMIC Tue Apr 15 19:04:15 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux                                            admin-tk@ubnt-learn-int04:~$ lsb_release -a                                                                                                                                   No LSB modules are available.                                                                                                                                                 Distributor ID: Ubuntu                                                                                                                                                        Description:    Ubuntu 24.04.2 LTS                                                                                                                                            Release:        24.04                                                                                                                                                         Codename:       noble                                                                                                                                                         admin-tk@ubnt-learn-int04:~$ mkdir kernel && cd kernel                                                                                                                        admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.13.2/amd64/linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb            --2025-09-05 12:09:04--  https://kernel.ubuntu.com/mainline/v6.13.2/amd64/linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                            Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.75, 185.125.189.76, 185.125.189.74                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.75|:443... connected.                                                                                         HTTP request sent, awaiting response... 404 Not Found                                                                                                                         2025-09-05 12:09:04 ERROR 404: Not Found.                                                                                                                                                                                                                                                                                                                   admin-tk@ubnt-learn-int04:~/kernel$ ls                                                                                                                                        admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb            --2025-09-05 12:13:41--  https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                            Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.76, 185.125.189.74, 185.125.189.75                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.76|:443... connected.                                                                                         HTTP request sent, awaiting response... 200 OK                                                                                                                                Length: 3671618 (3.5M) [application/x-debian-package]                                                                                                                         Saving to: ‘linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’                                                                                                                                                                                                                                                                       linux-headers-6.16.5-061605-generic_6.16.5- 100%[=========================================================================================>]   3.50M  7.69MB/s    in 0.5s                                                                                                                                                                                   2025-09-05 12:13:41 (7.69 MB/s) - ‘linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’ saved [3671618/3671618]                                                                                                                                                                                                                        admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb                      --2025-09-05 12:13:58--  https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb                                      Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.76, 185.125.189.75, 185.125.189.74                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.76|:443... connected.                                                                                         HTTP request sent, awaiting response... 200 OK                                                                                                                                Length: 14252736 (14M) [application/x-debian-package]                                                                                                                         Saving to: ‘linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb’                                                                                                                                                                                                                                                                                 linux-headers-6.16.5-061605_6.16.5-061605.2 100%[=========================================================================================>]  13.59M  16.0MB/s    in 0.9s                                                                                                                                                                                   2025-09-05 12:14:00 (16.0 MB/s) - ‘linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb’ saved [14252736/14252736]                                                                                                                                                                                                                                admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb     --2025-09-05 12:14:10--  https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                     Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.76, 185.125.189.74, 185.125.189.75                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.76|:443... connected.                                                                                         HTTP request sent, awaiting response... 200 OK                                                                                                                                Length: 16066752 (15M) [application/x-debian-package]                                                                                                                         Saving to: ‘linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’                                                                                                                                                                                                                                                                linux-image-unsigned-6.16.5-061605-generic_ 100%[=========================================================================================>]  15.32M  18.2MB/s    in 0.8s                                                                                                                                                                                   2025-09-05 12:14:12 (18.2 MB/s) - ‘linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’ saved [16066752/16066752]                                                                                                                                                                                                               admin-tk@ubnt-learn-int04:~/kernel$ wget https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb            --2025-09-05 12:14:37--  https://kernel.ubuntu.com/mainline/v6.16.5/amd64/linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                            Resolving kernel.ubuntu.com (kernel.ubuntu.com)... 185.125.189.74, 185.125.189.76, 185.125.189.75                                                                             Connecting to kernel.ubuntu.com (kernel.ubuntu.com)|185.125.189.74|:443... connected.                                                                                         HTTP request sent, awaiting response... 200 OK                                                                                                                                Length: 262144192 (250M) [application/x-debian-package]                                                                                                                       Saving to: ‘linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’                                                                                                                                                                                                                                                                       linux-modules-6.16.5-061605-generic_6.16.5- 100%[=========================================================================================>] 250.00M  29.1MB/s    in 9.1s                                                                                                                                                                                   2025-09-05 12:14:47 (27.4 MB/s) - ‘linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb’ saved [262144192/262144192]                                                                                                                                                                                                                    admin-tk@ubnt-learn-int04:~/kernel$                                                                                                    




admin-tk@ubnt-learn-int04:~/kernel$ script -a session.log                                                                                                                     Script started, output log file is 'session.log'.                                                                                                                             To run a command as administrator (user "root"), use "sudo <command>".                                                                                                        See "man sudo_root" for details.                                                                                                                                                                                                                                                                                                                            admin-tk@ubnt-learn-int04:~/kernel$ sudo script -a session.log                                                                                                                [sudo] password for admin-tk:                                                                                                                                                 Script started, output log file is 'session.log'.                                                                                                                             root@ubnt-learn-int04:/home/admin-tk/kernel# ls                                                                                                                               linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb            linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb  session.log        linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb  linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb                            root@ubnt-learn-int04:/home/admin-tk/kernel# sudo dpkg -i *.deb                                                                                                               Selecting previously unselected package linux-headers-6.16.5-061605.                                                                                                          (Reading database ... 126025 files and directories currently installed.)                                                                                                      Preparing to unpack linux-headers-6.16.5-061605_6.16.5-061605.202509041605_all.deb ...                                                                                        Unpacking linux-headers-6.16.5-061605 (6.16.5-061605.202509041605) ...                                                                                                        Selecting previously unselected package linux-headers-6.16.5-061605-generic.                                                                                                  Preparing to unpack linux-headers-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb ...                                                                              Unpacking linux-headers-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                                Selecting previously unselected package linux-image-unsigned-6.16.5-061605-generic.                                                                                           Preparing to unpack linux-image-unsigned-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb ...                                                                       Unpacking linux-image-unsigned-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                         Selecting previously unselected package linux-modules-6.16.5-061605-generic.                                                                                                  Preparing to unpack linux-modules-6.16.5-061605-generic_6.16.5-061605.202509041605_amd64.deb ...                                                                              Unpacking linux-modules-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                                Setting up linux-headers-6.16.5-061605 (6.16.5-061605.202509041605) ...                                                                                                       Setting up linux-headers-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                               Setting up linux-modules-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                               Setting up linux-image-unsigned-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                                        I: /boot/vmlinuz.old is now a symlink to vmlinuz-6.8.0-79-generic                                                                                                             I: /boot/initrd.img.old is now a symlink to initrd.img-6.8.0-79-generic                                                                                                       I: /boot/vmlinuz is now a symlink to vmlinuz-6.16.5-061605-generic                                                                                                            I: /boot/initrd.img is now a symlink to initrd.img-6.16.5-061605-generic                                                                                                      Processing triggers for linux-image-unsigned-6.16.5-061605-generic (6.16.5-061605.202509041605) ...                                                                           /etc/kernel/postinst.d/initramfs-tools:                                                                                                                                       update-initramfs: Generating /boot/initrd.img-6.16.5-061605-generic                                                                                                           /etc/kernel/postinst.d/zz-update-grub:                                                                                                                                        Sourcing file `/etc/default/grub'                                                                                                                                             Generating grub configuration file ...                                                                                                                                        Found linux image: /boot/vmlinuz-6.16.5-061605-generic                                                                                                                        Found initrd image: /boot/initrd.img-6.16.5-061605-generic                                                                                                                    Found linux image: /boot/vmlinuz-6.8.0-79-generic                                                                                                                             Found initrd image: /boot/initrd.img-6.8.0-79-generic                                                                                                                         Found linux image: /boot/vmlinuz-6.8.0-60-generic                                                                                                                             Found initrd image: /boot/initrd.img-6.8.0-60-generic                                                                                                                         Warning: os-prober will not be executed to detect other bootable partitions.                                                                                                  Systems on them will not be added to the GRUB boot configuration.                                                                                                             Check GRUB_DISABLE_OS_PROBER documentation entry.                                                                                                                             Adding boot menu entry for UEFI Firmware Settings ...                                                                                                                         done                                                                                                                                                                          root@ubnt-learn-int04:/home/admin-tk/kernel# ls -al /boot                                                                                                                     total 305996                                                                                                                                                                  drwxr-xr-x  4 root root     4096 Sep  5 12:35 .                                                                                                                               drwxr-xr-x 23 root root     4096 May 28 09:45 ..                                                                                                                              -rw-r--r--  1 root root   299505 Sep  4 16:05 config-6.16.5-061605-generic                                                                                                    -rw-r--r--  1 root root   287574 Apr 15 17:24 config-6.8.0-60-generic                                                                                                         -rw-r--r--  1 root root   287600 Aug 12 10:33 config-6.8.0-79-generic                                                                                                         drwxr-xr-x  5 root root     4096 Sep  5 12:35 grub                                                                                                                            lrwxrwxrwx  1 root root       32 Sep  5 12:34 initrd.img -> initrd.img-6.16.5-061605-generic                                                                                  -rw-r--r--  1 root root 93157117 Sep  5 12:35 initrd.img-6.16.5-061605-generic                                                                                                -rw-r--r--  1 root root 72388638 Jul  1 06:18 initrd.img-6.8.0-60-generic                                                                                                     -rw-r--r--  1 root root 72465512 Aug 29 06:49 initrd.img-6.8.0-79-generic                                                                                                     lrwxrwxrwx  1 root root       27 Sep  5 12:34 initrd.img.old -> initrd.img-6.8.0-79-generic                                                                                   drwx------  2 root root    16384 May 28 09:41 lost+found                                                                                                                      -rw-------  1 root root 10126845 Sep  4 16:05 System.map-6.16.5-061605-generic                                                                                                -rw-------  1 root root  9109334 Apr 15 17:24 System.map-6.8.0-60-generic                                                                                                     -rw-------  1 root root  9113656 Aug 12 10:33 System.map-6.8.0-79-generic                                                                                                     lrwxrwxrwx  1 root root       29 Sep  5 12:34 vmlinuz -> vmlinuz-6.16.5-061605-generic                                                                                        -rw-------  1 root root 16032256 Sep  4 16:05 vmlinuz-6.16.5-061605-generic                                                                                                   -rw-------  1 root root 14997896 Apr 15 17:30 vmlinuz-6.8.0-60-generic                                                                                                        -rw-------  1 root root 15014280 Aug 12 10:35 vmlinuz-6.8.0-79-generic                                                                                                        lrwxrwxrwx  1 root root       24 Sep  5 12:34 vmlinuz.old -> vmlinuz-6.8.0-79-generic                                                                                         root@ubnt-learn-int04:/home/admin-tk/kernel# 

root@ubnt-learn-int04:/home/admin-tk/kernel# sudo update-grub                                                                                                                 Sourcing file `/etc/default/grub'                                                                                                                                             Generating grub configuration file ...                                                                                                                                        Found linux image: /boot/vmlinuz-6.16.5-061605-generic                                                                                                                        Found initrd image: /boot/initrd.img-6.16.5-061605-generic                                                                                                                    Found linux image: /boot/vmlinuz-6.8.0-79-generic                                                                                                                             Found initrd image: /boot/initrd.img-6.8.0-79-generic                                                                                                                         Found linux image: /boot/vmlinuz-6.8.0-60-generic                                                                                                                             Found initrd image: /boot/initrd.img-6.8.0-60-generic                                                                                                                         Warning: os-prober will not be executed to detect other bootable partitions.                                                                                                  Systems on them will not be added to the GRUB boot configuration.                                                                                                             Check GRUB_DISABLE_OS_PROBER documentation entry.                                                                                                                             Adding boot menu entry for UEFI Firmware Settings ...                                                                                                                         done 

root@ubnt-learn-int04:/home/admin-tk/kernel# sudo grub-set-default 0
admin-tk@ubnt-learn-int04:~$ uname -r
6.16.5-061605-generic
admin-tk@ubnt-learn-int04:~$

```




### Работа с mdadm
научиться использовать утилиту для управления программными RAID-массивами в Linux

Терминал, команды и результат:
```
admin-tk@ubnt-learn-int04:~$ lsblk                                                                                    NAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS                                                        sda                         8:0    0   30G  0 disk                                                                    ├─sda1                      8:1    0    1M  0 part                                                                    ├─sda2                      8:2    0    2G  0 part /boot                                                              └─sda3                      8:3    0   28G  0 part                                                                      ├─ubuntu--vg-ubuntu--lv 252:0    0   24G  0 lvm  /                                                                    └─ubuntu--vg-swap--lv   252:1    0    4G  0 lvm                                                                     sdb                         8:16   0   10G  0 disk                                                                    ├─sdb1                      8:17   0 1023M  0 part                                                                    ├─sdb2                      8:18   0    1G  0 part                                                                    ├─sdb3                      8:19   0    1G  0 part                                                                    ├─sdb4                      8:20   0    1G  0 part                                                                    ├─sdb5                      8:21   0    1G  0 part                                                                    ├─sdb6                      8:22   0    1G  0 part                                                                    ├─sdb7                      8:23   0    1G  0 part                                                                    ├─sdb8                      8:24   0    1G  0 part                                                                    └─sdb9                      8:25   0    1G  0 part                                                                    sdc                         8:32   0   10G  0 disk                                                                    sr0                        11:0    1 1024M  0 rom                                                                     admin-tk@ubnt-learn-int04:~$ sudo lshw -short | grep disk                                                             [sudo] password for admin-tk:                                                                                         /0/100/10/0.0.0    /dev/sda    disk       32GB Virtual disk                                                           /0/100/10/0.1.0    /dev/sdb    disk       10GB Virtual disk                                                           /0/100/10/0.2.0    /dev/sdc    disk       10GB Virtual disk                                                           /0/100/11/1/0.0.0  /dev/cdrom  disk       VMware SATA CD00                                                            admin-tk@ubnt-learn-int04:~$ sudo fdisk -l                                                                            Disk /dev/sda: 30 GiB, 32212254720 bytes, 62914560 sectors                                                            Disk model: Virtual disk                                                                                              Units: sectors of 1 * 512 = 512 bytes                                                                                 Sector size (logical/physical): 512 bytes / 512 bytes                                                                 I/O size (minimum/optimal): 512 bytes / 512 bytes                                                                     Disklabel type: gpt                                                                                                   Disk identifier: AC7F240B-561C-4D45-8B97-C0D4BC110F55                                                                                                                                                                                       Device       Start      End  Sectors Size Type                                                                        /dev/sda1     2048     4095     2048   1M BIOS boot                                                                   /dev/sda2     4096  4198399  4194304   2G Linux filesystem                                                            /dev/sda3  4198400 62912511 58714112  28G Linux filesystem                                                                                                                                                                                                                                                                                                        Disk /dev/sdb: 10 GiB, 10737418240 bytes, 20971520 sectors                                                            Disk model: Virtual disk                                                                                              Units: sectors of 1 * 512 = 512 bytes                                                                                 Sector size (logical/physical): 512 bytes / 512 bytes                                                                 I/O size (minimum/optimal): 512 bytes / 512 bytes                                                                     Disklabel type: gpt                                                                                                   Disk identifier: C087A96A-68D7-4273-B0D7-D02F8CAD6BCF                                                                                                                                                                                       Device        Start      End Sectors  Size Type                                                                       /dev/sdb1      2048  2097151 2095104 1023M Linux filesystem                                                           /dev/sdb2   2097152  4194303 2097152    1G Linux filesystem                                                           /dev/sdb3   4194304  6291455 2097152    1G Linux filesystem                                                           /dev/sdb4   6291456  8388607 2097152    1G Linux filesystem                                                           /dev/sdb5   8388608 10485759 2097152    1G Linux filesystem                                                           /dev/sdb6  10485760 12582911 2097152    1G Linux filesystem                                                           /dev/sdb7  12582912 14680063 2097152    1G Linux filesystem                                                           /dev/sdb8  14680064 16777215 2097152    1G Linux filesystem                                                           /dev/sdb9  16777216 18874367 2097152    1G Linux filesystem                                                                                                                                                                                                                                                                                                       Disk /dev/sdc: 10 GiB, 10737418240 bytes, 20971520 sectors                                                            Disk model: Virtual disk                                                                                              Units: sectors of 1 * 512 = 512 bytes                                                                                 Sector size (logical/physical): 512 bytes / 512 bytes                                                                 I/O size (minimum/optimal): 512 bytes / 512 bytes                                                                                                                                                                                                                                                                                                                 Disk /dev/mapper/ubuntu--vg-ubuntu--lv: 24 GiB, 25765609472 bytes, 50323456 sectors                                   Units: sectors of 1 * 512 = 512 bytes                                                                                 Sector size (logical/physical): 512 bytes / 512 bytes                                                                 I/O size (minimum/optimal): 512 bytes / 512 bytes                                                                                                                                                                                                                                                                                                                 Disk /dev/mapper/ubuntu--vg-swap--lv: 4 GiB, 4294967296 bytes, 8388608 sectors                                        Units: sectors of 1 * 512 = 512 bytes                                                                                 Sector size (logical/physical): 512 bytes / 512 bytes                                                                 I/O size (minimum/optimal): 512 bytes / 512 bytes                                                                     admin-tk@ubnt-learn-int04:~$ sudo fdisk /dev/sdb                                                                                                                                                                                            Welcome to fdisk (util-linux 2.39.3).                                                                                 Changes will remain in memory only, until you decide to write them.                                                   Be careful before using the write command.                                                                                                                                                                                                                                                                                                                        Command (m for help): m                                                                                                                                                                                                                     Help:                                                                                                                                                                                                                                         GPT                                                                                                                    M   enter protective/hybrid MBR                                                                                                                                                                                                            Generic                                                                                                                d   delete a partition                                                                                                F   list free unpartitioned space                                                                                     l   list known partition types                                                                                        n   add a new partition                                                                                               p   print the partition table                                                                                         t   change a partition type                                                                                           v   verify the partition table                                                                                        i   print information about a partition                                                                                                                                                                                                    Misc                                                                                                                   m   print this menu                                                                                                   x   extra functionality (experts only)                                                                                                                                                                                                     Script                                                                                                                 I   load disk layout from sfdisk script file                                                                          O   dump disk layout to sfdisk script file                                                                                                                                                                                                 Save & Exit                                                                                                            w   write table to disk and exit                                                                                      q   quit without saving changes                                                                                                                                                                                                            Create a new label                                                                                                     g   create a new empty GPT partition table                                                                            G   create a new empty SGI (IRIX) partition table                                                                     o   create a new empty MBR (DOS) partition table                                                                      s   create a new empty Sun partition table                                                                                                                                                                                                                                                                                                                     Command (m for help): q                                                                                                                                                                                                                     admin-tk@ubnt-learn-int04:~$ lsblk                                                                                    NAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS                                                        sda                         8:0    0   30G  0 disk                                                                    ├─sda1                      8:1    0    1M  0 part                                                                    ├─sda2                      8:2    0    2G  0 part /boot                                                              └─sda3                      8:3    0   28G  0 part                                                                      ├─ubuntu--vg-ubuntu--lv 252:0    0   24G  0 lvm  /                                                                    └─ubuntu--vg-swap--lv   252:1    0    4G  0 lvm                                                                     sdb                         8:16   0   10G  0 disk                                                                    ├─sdb1                      8:17   0 1023M  0 part                                                                    ├─sdb2                      8:18   0    1G  0 part                                                                    ├─sdb3                      8:19   0    1G  0 part                                                                    ├─sdb4                      8:20   0    1G  0 part                                                                    ├─sdb5                      8:21   0    1G  0 part                                                                    ├─sdb6                      8:22   0    1G  0 part                                                                    ├─sdb7                      8:23   0    1G  0 part                                                                    ├─sdb8                      8:24   0    1G  0 part                                                                    └─sdb9                      8:25   0    1G  0 part                                                                    sdc                         8:32   0   10G  0 disk                                                                    sr0                        11:0    1 1024M  0 rom                                                                     admin-tk@ubnt-learn-int04:~$ sudo lshw -short | grep disk                                                             /0/100/10/0.0.0    /dev/sda    disk       32GB Virtual disk                                                           /0/100/10/0.1.0    /dev/sdb    disk       10GB Virtual disk                                                           /0/100/10/0.2.0    /dev/sdc    disk       10GB Virtual disk                                                           /0/100/11/1/0.0.0  /dev/cdrom  disk       VMware SATA CD00                                                            admin-tk@ubnt-learn-int04:~$ mdadm --zero-superblock --force /dev/sdb                                                 mdadm: must be super-user to perform this action                                                                      admin-tk@ubnt-learn-int04:~$ sudo mdadm --zero-superblock --force /dev/sdb                                            mdadm: Unrecognised md component device - /dev/sdb                                                                    admin-tk@ubnt-learn-int04:~$ sudo mdadm --create /dev/md55 -l 1 -n 2 /dev/sdb2 /dev/sdb3                              [sudo] password for admin-tk:                                                                                         mdadm: Note: this array has metadata at the start and                                                                     may not be suitable as a boot device.  If you plan to                                                                 store '/boot' on this device please ensure that                                                                       your boot-loader understands md/v1.x metadata, or use                                                                 --metadata=0.90                                                                                                   Continue creating array? y                                                                                            mdadm: Defaulting to version 1.2 metadata                                                                             mdadm: array /dev/md55 started.                                                                                       admin-tk@ubnt-learn-int04:~$ cat /proc/mdstat                                                                         Personalities : [raid0] [raid1] [raid4] [raid5] [raid6] [raid10] [linear]                                             md55 : active raid1 sdb3[1] sdb2[0]                                                                                         1046528 blocks super 1.2 [2/2] [UU]                                                                                                                                                                                                   unused devices: <none>                                                                                                admin-tk@ubnt-learn-int04:~$ mdadm  -D /dev/md55                                                                      mdadm: must be super-user to perform this action                                                                      admin-tk@ubnt-learn-int04:~$ sudo mdadm  -D /dev/md55                                                                 /dev/md55:                                                                                                                       Version : 1.2                                                                                                   Creation Time : Fri Sep 12 19:13:16 2025                                                                                 Raid Level : raid1                                                                                                    Array Size : 1046528 (1022.00 MiB 1071.64 MB)                                                                      Used Dev Size : 1046528 (1022.00 MiB 1071.64 MB)                                                                       Raid Devices : 2                                                                                                     Total Devices : 2                                                                                                       Persistence : Superblock is persistent                                                                                                                                                                                                      Update Time : Fri Sep 12 19:13:23 2025                                                                                      State : clean                                                                                                Active Devices : 2                                                                                                   Working Devices : 2                                                                                                    Failed Devices : 0                                                                                                     Spare Devices : 0                                                                                                                                                                                                                      Consistency Policy : resync                                                                                                                                                                                                                               Name : ubnt-learn-int04:55  (local to host ubnt-learn-int04)                                                          UUID : fc81eb56:6e1a3875:c1e98061:4301e682                                                                          Events : 17                                                                                                                                                                                                                         Number   Major   Minor   RaidDevice State                                                                                0       8       18        0      active sync   /dev/sdb2                                                              1       8       19        1      active sync   /dev/sdb3                                                       admin-tk@ubnt-learn-int04:~$ mdadm -S /dev/md55                                                                       mdadm: must be super-user to perform this action                                                                      admin-tk@ubnt-learn-int04:~$ sudo mdadm -S /dev/md55                                                                  mdadm: stopped /dev/md55                                                                                              admin-tk@ubnt-learn-int04:~$ lsblk                                                                                    NAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS                                                        sda                         8:0    0   30G  0 disk                                                                    ├─sda1                      8:1    0    1M  0 part                                                                    ├─sda2                      8:2    0    2G  0 part /boot                                                              └─sda3                      8:3    0   28G  0 part                                                                      ├─ubuntu--vg-ubuntu--lv 252:0    0   24G  0 lvm  /                                                                    └─ubuntu--vg-swap--lv   252:1    0    4G  0 lvm                                                                     sdb                         8:16   0   10G  0 disk                                                                    ├─sdb1                      8:17   0 1023M  0 part                                                                    ├─sdb2                      8:18   0    1G  0 part                                                                    ├─sdb3                      8:19   0    1G  0 part                                                                    ├─sdb4                      8:20   0    1G  0 part                                                                    ├─sdb5                      8:21   0    1G  0 part                                                                    ├─sdb6                      8:22   0    1G  0 part                                                                    ├─sdb7                      8:23   0    1G  0 part                                                                    ├─sdb8                      8:24   0    1G  0 part                                                                    └─sdb9                      8:25   0    1G  0 part                                                                    sdc                         8:32   0   10G  0 disk                                                                    sr0                        11:0    1 1024M  0 rom                                                                     admin-tk@ubnt-learn-int04:~$ sudo mdadm --zero-superblock --force /dev/sdb2                                           admin-tk@ubnt-learn-int04:~$ sudo mdadm --zero-superblock --force /dev/sdb3                                           admin-tk@ubnt-learn-int04:~$ sudo mdadm --create /dev/md55 -l 5 -n 4 /dev/sdb2 /dev/sdb3 /dev/sdb4 /dev/sdb5          mdadm: Defaulting to version 1.2 metadata                                                                             mdadm: array /dev/md55 started.                                                                                       admin-tk@ubnt-learn-int04:~$ lsblk                                                                                    NAME                      MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINTS                                                       sda                         8:0    0   30G  0 disk                                                                    ├─sda1                      8:1    0    1M  0 part                                                                    ├─sda2                      8:2    0    2G  0 part  /boot                                                             └─sda3                      8:3    0   28G  0 part                                                                      ├─ubuntu--vg-ubuntu--lv 252:0    0   24G  0 lvm   /                                                                   └─ubuntu--vg-swap--lv   252:1    0    4G  0 lvm                                                                     sdb                         8:16   0   10G  0 disk                                                                    ├─sdb1                      8:17   0 1023M  0 part                                                                    ├─sdb2                      8:18   0    1G  0 part                                                                    │ └─md55                    9:55   0    3G  0 raid5                                                                   ├─sdb3                      8:19   0    1G  0 part                                                                    │ └─md55                    9:55   0    3G  0 raid5                                                                   ├─sdb4                      8:20   0    1G  0 part                                                                    │ └─md55                    9:55   0    3G  0 raid5                                                                   ├─sdb5                      8:21   0    1G  0 part                                                                    │ └─md55                    9:55   0    3G  0 raid5                                                                   ├─sdb6                      8:22   0    1G  0 part                                                                    ├─sdb7                      8:23   0    1G  0 part                                                                    ├─sdb8                      8:24   0    1G  0 part                                                                    └─sdb9                      8:25   0    1G  0 part                                                                    sdc                         8:32   0   10G  0 disk                                                                    sr0                        11:0    1 1024M  0 rom                                                                     admin-tk@ubnt-learn-int04:~$ sudo mdadm  -D /dev/md55                                                                 /dev/md55:                                                                                                                       Version : 1.2                                                                                                   Creation Time : Fri Sep 12 19:30:02 2025                                                                                 Raid Level : raid5                                                                                                    Array Size : 3139584 (2.99 GiB 3.21 GB)                                                                            Used Dev Size : 1046528 (1022.00 MiB 1071.64 MB)                                                                       Raid Devices : 4                                                                                                     Total Devices : 4                                                                                                       Persistence : Superblock is persistent                                                                                                                                                                                                      Update Time : Fri Sep 12 19:30:31 2025                                                                                      State : clean, degraded, recovering                                                                          Active Devices : 3                                                                                                   Working Devices : 4                                                                                                    Failed Devices : 0                                                                                                     Spare Devices : 1                                                                                                                                                                                                                                  Layout : left-symmetric                                                                                           Chunk Size : 512K                                                                                                                                                                                                                   Consistency Policy : resync                                                                                                                                                                                                                     Rebuild Status : 70% complete                                                                                                                                                                                                                         Name : ubnt-learn-int04:55  (local to host ubnt-learn-int04)                                                          UUID : 119e782f:e0969d84:33ed6fc6:7ac049e0                                                                          Events : 12                                                                                                                                                                                                                         Number   Major   Minor   RaidDevice State                                                                                0       8       18        0      active sync   /dev/sdb2                                                              1       8       19        1      active sync   /dev/sdb3                                                              2       8       20        2      active sync   /dev/sdb4                                                              4       8       21        3      spare rebuilding   /dev/sdb5                                                  admin-tk@ubnt-learn-int04:~$ sudo mdadm  -D /dev/md55                                                                 /dev/md55:                                                                                                                       Version : 1.2                                                                                                   Creation Time : Fri Sep 12 19:30:02 2025                                                                                 Raid Level : raid5                                                                                                    Array Size : 3139584 (2.99 GiB 3.21 GB)                                                                            Used Dev Size : 1046528 (1022.00 MiB 1071.64 MB)                                                                       Raid Devices : 4                                                                                                     Total Devices : 4                                                                                                       Persistence : Superblock is persistent                                                                                                                                                                                                      Update Time : Fri Sep 12 19:30:44 2025                                                                                      State : clean                                                                                                Active Devices : 4                                                                                                   Working Devices : 4                                                                                                    Failed Devices : 0                                                                                                     Spare Devices : 0                                                                                                                                                                                                                                  Layout : left-symmetric                                                                                           Chunk Size : 512K                                                                                                                                                                                                                   Consistency Policy : resync                                                                                                                                                                                                                               Name : ubnt-learn-int04:55  (local to host ubnt-learn-int04)                                                          UUID : 119e782f:e0969d84:33ed6fc6:7ac049e0                                                                          Events : 18                                                                                                                                                                                                                         Number   Major   Minor   RaidDevice State                                                                                0       8       18        0      active sync   /dev/sdb2                                                              1       8       19        1      active sync   /dev/sdb3                                                              2       8       20        2      active sync   /dev/sdb4                                                              4       8       21        3      active sync   /dev/sdb5                                                       admin-tk@ubnt-learn-int04:~$ mdadm /dev/md55 --fail /dev/sdb3                                                         mdadm: error opening /dev/md55: Permission denied                                                                     admin-tk@ubnt-learn-int04:~$ sudo mdadm /dev/md55 --fail /dev/sdb3                                                    mdadm: set /dev/sdb3 faulty in /dev/md55                                                                              admin-tk@ubnt-learn-int04:~$ sudo mdadm  -D /dev/md55                                                                 /dev/md55:                                                                                                                       Version : 1.2                                                                                                   Creation Time : Fri Sep 12 19:30:02 2025                                                                                 Raid Level : raid5                                                                                                    Array Size : 3139584 (2.99 GiB 3.21 GB)                                                                            Used Dev Size : 1046528 (1022.00 MiB 1071.64 MB)                                                                       Raid Devices : 4                                                                                                     Total Devices : 4                                                                                                       Persistence : Superblock is persistent                                                                                                                                                                                                      Update Time : Fri Sep 12 19:47:44 2025                                                                                      State : clean, degraded                                                                                      Active Devices : 3                                                                                                   Working Devices : 3                                                                                                    Failed Devices : 1                                                                                                     Spare Devices : 0                                                                                                                                                                                                                                  Layout : left-symmetric                                                                                           Chunk Size : 512K                                                                                                                                                                                                                   Consistency Policy : resync                                                                                                                                                                                                                               Name : ubnt-learn-int04:55  (local to host ubnt-learn-int04)                                                          UUID : 119e782f:e0969d84:33ed6fc6:7ac049e0                                                                          Events : 20                                                                                                                                                                                                                         Number   Major   Minor   RaidDevice State                                                                                0       8       18        0      active sync   /dev/sdb2                                                              -       0        0        1      removed                                                                              2       8       20        2      active sync   /dev/sdb4                                                              4       8       21        3      active sync   /dev/sdb5                                                                                                                                                                                    1       8       19        -      faulty   /dev/sdb3                                                            admin-tk@ubnt-learn-int04:~$ cat /proc/mdstat                                                                         Personalities : [raid0] [raid1] [raid4] [raid5] [raid6] [raid10] [linear]                                             md55 : active raid5 sdb5[4] sdb4[2] sdb3[1](F) sdb2[0]                                                                      3139584 blocks super 1.2 level 5, 512k chunk, algorithm 2 [4/3] [U_UU]                                                                                                                                                                unused devices: <none>                                                                                                admin-tk@ubnt-learn-int04:~$ sudo mdadm /dev/md55 --remove /dev/sdb3                                                  mdadm: hot removed /dev/sdb3 from /dev/md55                                                                           admin-tk@ubnt-learn-int04:~$ sudo mdadm /dev/md55 --add /dev/sdb6                                                     mdadm: added /dev/sdb6                                                                                                admin-tk@ubnt-learn-int04:~$ cat /proc/mdstat                                                                         Personalities : [raid0] [raid1] [raid4] [raid5] [raid6] [raid10] [linear]                                             md55 : active raid5 sdb6[5] sdb5[4] sdb4[2] sdb2[0]                                                                         3139584 blocks super 1.2 level 5, 512k chunk, algorithm 2 [4/3] [U_UU]                                                [==========>..........]  recovery = 54.4% (570580/1046528) finish=0.2min speed=31698K/sec                                                                                                                                             unused devices: <none>                                                                                                admin-tk@ubnt-learn-int04:~$ mdadm -D /dev/md55                                                                       mdadm: must be super-user to perform this action                                                                      admin-tk@ubnt-learn-int04:~$ sudo mdadm -D /dev/md55                                                                  /dev/md55:                                                                                                                       Version : 1.2                                                                                                   Creation Time : Fri Sep 12 19:30:02 2025                                                                                 Raid Level : raid5                                                                                                    Array Size : 3139584 (2.99 GiB 3.21 GB)                                                                            Used Dev Size : 1046528 (1022.00 MiB 1071.64 MB)                                                                       Raid Devices : 4                                                                                                     Total Devices : 4                                                                                                       Persistence : Superblock is persistent                                                                                                                                                                                                      Update Time : Fri Sep 12 19:53:26 2025                                                                                      State : clean                                                                                                Active Devices : 4                                                                                                   Working Devices : 4                                                                                                    Failed Devices : 0                                                                                                     Spare Devices : 0                                                                                                                                                                                                                                  Layout : left-symmetric                                                                                           Chunk Size : 512K                                                                                                                                                                                                                   Consistency Policy : resync                                                                                                                                                                                                                               Name : ubnt-learn-int04:55  (local to host ubnt-learn-int04)                                                          UUID : 119e782f:e0969d84:33ed6fc6:7ac049e0                                                                          Events : 40                                                                                                                                                                                                                         Number   Major   Minor   RaidDevice State                                                                                0       8       18        0      active sync   /dev/sdb2                                                              5       8       22        1      active sync   /dev/sdb6                                                              2       8       20        2      active sync   /dev/sdb4                                                              4       8       21        3      active sync   /dev/sdb5                                                       admin-tk@ubnt-learn-int04:~$ cat /proc/mdstat                                                                         Personalities : [raid0] [raid1] [raid4] [raid5] [raid6] [raid10] [linear]                                             md55 : active raid5 sdb6[5] sdb5[4] sdb4[2] sdb2[0]                                                                         3139584 blocks super 1.2 level 5, 512k chunk, algorithm 2 [4/4] [UUUU]                                                                                                                                                                unused devices: <none>                                                                                                admin-tk@ubnt-learn-int04:~$ sudo parted  -s /dev/md55 mklabel gpt                                                    admin-tk@ubnt-learn-int04:~$ parted /dev/md55 mkpart primary ext4 0% 20%                                              WARNING: You are not superuser.  Watch out for permissions.                                                           Error: Error opening /dev/md55: Permission denied                                                                     Retry/Cancel? y                                                                                                       parted: invalid token: y                                                                                              Retry/Cancel? retry                                                                                                   Error: Error opening /dev/md55: Permission denied                                                                     Retry/Cancel? cancel                                                                                                  admin-tk@ubnt-learn-int04:~$ sudo parted /dev/md55 mkpart primary ext4 0% 20%                                         Information: You may need to update /etc/fstab.                                                                                                                                                                                             admin-tk@ubnt-learn-int04:~$ sudo parted /dev/md55 mkpart primary ext4 20% 40%                                        Information: You may need to update /etc/fstab.                                                                                                                                                                                             admin-tk@ubnt-learn-int04:~$ sudo parted /dev/md55 mkpart primary ext4 40% 60%                                        Information: You may need to update /etc/fstab.                                                                                                                                                                                             admin-tk@ubnt-learn-int04:~$ sudo parted /dev/md55 mkpart primary ext4 60% 80%                                        Information: You may need to update /etc/fstab.                                                                                                                                                                                             admin-tk@ubnt-learn-int04:~$ sudo parted /dev/md55 mkpart primary ext4 80% 100%                                       Information: You may need to update /etc/fstab.                                                                                                                                                                                             admin-tk@ubnt-learn-int04:~$ mc                                                                                                                                                                                                             admin-tk@ubnt-learn-int04:~$ admin-tk@ubnt-learn-int04:~$                                                             admin-tk@ubnt-learn-int04:~$ for i in $(seq 1 5); do sudo mkfs.ext4 /dev/md55p$i;                                     > done                                                                                                                mke2fs 1.47.0 (5-Feb-2023)                                                                                            Creating filesystem with 156672 4k blocks and 39200 inodes                                                            Filesystem UUID: 0a9b40cb-f08e-404e-bc4b-b9b4bdcf97ce                                                                 Superblock backups stored on blocks:                                                                                          32768, 98304                                                                                                                                                                                                                        Allocating group tables: done                                                                                         Writing inode tables: done                                                                                            Creating journal (4096 blocks): done                                                                                  Writing superblocks and filesystem accounting information: done                                                                                                                                                                             mke2fs 1.47.0 (5-Feb-2023)                                                                                            Creating filesystem with 157056 4k blocks and 39280 inodes                                                            Filesystem UUID: 9b0bc18a-2980-4401-8986-ccd5758fe6aa                                                                 Superblock backups stored on blocks:                                                                                          32768, 98304                                                                                                                                                                                                                        Allocating group tables: done                                                                                         Writing inode tables: done                                                                                            Creating journal (4096 blocks): done                                                                                  Writing superblocks and filesystem accounting information: done                                                                                                                                                                             mke2fs 1.47.0 (5-Feb-2023)                                                                                            Creating filesystem with 156672 4k blocks and 39200 inodes                                                            Filesystem UUID: 3dd213c0-2d62-4777-8d59-c75289588390                                                                 Superblock backups stored on blocks:                                                                                          32768, 98304                                                                                                                                                                                                                        Allocating group tables: done                                                                                         Writing inode tables: done                                                                                            Creating journal (4096 blocks): done                                                                                  Writing superblocks and filesystem accounting information: done                                                                                                                                                                             mke2fs 1.47.0 (5-Feb-2023)                                                                                            Creating filesystem with 157056 4k blocks and 39280 inodes                                                            Filesystem UUID: ca23943b-d6b6-4adc-ab5d-a0d65543f756                                                                 Superblock backups stored on blocks:                                                                                          32768, 98304                                                                                                                                                                                                                        Allocating group tables: done                                                                                         Writing inode tables: done                                                                                            Creating journal (4096 blocks): done                                                                                  Writing superblocks and filesystem accounting information: done                                                                                                                                                                             mke2fs 1.47.0 (5-Feb-2023)                                                                                            Creating filesystem with 156672 4k blocks and 39200 inodes                                                            Filesystem UUID: 176514ae-f10d-4eae-9f35-87aa004964b3                                                                 Superblock backups stored on blocks:                                                                                          32768, 98304                                                                                                                                                                                                                        Allocating group tables: done                                                                                         Writing inode tables: done                                                                                            Creating journal (4096 blocks): done                                                                                  Writing superblocks and filesystem accounting information: done                                                                                                                                                                             admin-tk@ubnt-learn-int04:~$ sudo mkdir -p /raid/part{ 1,2,3,4,5}                                                     admin-tk@ubnt-learn-int04:~$ for i in $(seq 1 5); do mount /md55p$i                                                   >  /raid/part$i; done                                                                                                 mount: /md55p1: can't find in /etc/fstab.                                                                             bash: /raid/part1: No such file or directory                                                                          mount: /md55p2: can't find in /etc/fstab.                                                                             bash: /raid/part2: No such file or directory                                                                          mount: /md55p3: can't find in /etc/fstab.                                                                             bash: /raid/part3: No such file or directory                                                                          mount: /md55p4: can't find in /etc/fstab.                                                                             bash: /raid/part4: No such file or directory                                                                          mount: /md55p5: can't find in /etc/fstab.                                                                             bash: /raid/part5: No such file or directory                                                                          admin-tk@ubnt-learn-int04:~$ ls /dev/md55*                                                                            /dev/md55  /dev/md55p1  /dev/md55p2  /dev/md55p3  /dev/md55p4  /dev/md55p5                                            admin-tk@ubnt-learn-int04:~$ lsblk /dev/md55                                                                          NAME     MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS                                                                       md55       9:55   0     3G  0 raid5                                                                                   ├─md55p1 259:0    0   612M  0 part                                                                                    ├─md55p2 259:1    0 613.5M  0 part                                                                                    ├─md55p3 259:2    0   612M  0 part                                                                                    ├─md55p4 259:3    0 613.5M  0 part                                                                                    └─md55p5 259:4    0   612M  0 part                                                                                    admin-tk@ubnt-learn-int04:~$ sudo mkdir -p /raid/part{1,2,3,4,5}                                                      [sudo] password for admin-tk:                                                                                         admin-tk@ubnt-learn-int04:~$ ls /raid/part*                                                                           /raid/part{:                                                                                                                                                                                                                                /raid/part1:                                                                                                                                                                                                                                /raid/part2:                                                                                                                                                                                                                                /raid/part3:                                                                                                                                                                                                                                /raid/part4:                                                                                                                                                                                                                                /raid/part5:                                                                                                          admin-tk@ubnt-learn-int04:~$ for i in {1..5}; do                                                                      > sudo mount /dev/md55p$i /raid/part$i                                                                                > done                                                                                                                admin-tk@ubnt-learn-int04:~$ df -h /raid/part*                                                                        Filesystem                         Size  Used Avail Use% Mounted on                                                   /dev/mapper/ubuntu--vg-ubuntu--lv   24G  9.1G   14G  41% /                                                            /dev/md55p1                        586M   24K  543M   1% /raid/part1                                                  /dev/md55p2                        587M   24K  544M   1% /raid/part2                                                  /dev/md55p3                        586M   24K  543M   1% /raid/part3                                                  /dev/md55p4                        587M   24K  544M   1% /raid/part4                                                  /dev/md55p5                        586M   24K  543M   1% /raid/part5                                                  admin-tk@ubnt-learn-int04:~$ df -h                                                                                    Filesystem                         Size  Used Avail Use% Mounted on                                                   tmpfs                              392M  1.3M  391M   1% /run                                                         /dev/mapper/ubuntu--vg-ubuntu--lv   24G  9.1G   14G  41% /                                                            tmpfs                              2.0G     0  2.0G   0% /dev/shm                                                     tmpfs                              5.0M     0  5.0M   0% /run/lock                                                    /dev/sda2                          2.0G  306M  1.5G  17% /boot                                                        tmpfs                              392M   12K  392M   1% /run/user/1002                                               /dev/md55p1                        586M   24K  543M   1% /raid/part1                                                  /dev/md55p2                        587M   24K  544M   1% /raid/part2                                                  /dev/md55p3                        586M   24K  543M   1% /raid/part3                                                  /dev/md55p4                        587M   24K  544M   1% /raid/part4                                                  /dev/md55p5                        586M   24K  543M   1% /raid/part5                                                  admin-tk@ubnt-learn-int04:~$                                          
```